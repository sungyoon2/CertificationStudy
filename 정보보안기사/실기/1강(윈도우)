1. 윈도우 인증과정에서 사용되는 주요 서비스
  1) LSA(Local Security Authority) 
      - 모든 계정의 로그인 검증 & 자원에 대한 접근권한 검사
      - 계정명과 SID -> 매칭 -> 감사로그 기록
      - 보안 서브시스템이라고 불림, NT 보안의 중심
  2) SAM(Security Account Manager)
      - 계정정보 DB관리 -> SAM 파일(암호화된 PassWord, 계정정보등이 저장됨)  
                          *SAM파일은 윈도우 설치 디렉터리(C:| Winnt 또는 windows)에 저장됨      
                            + 중요정보가 모두 들어있기에 적절한 접근통제 필요
                                -> Adiminstrators 및 System 그룹외는 SAM파일에 대한 접근제한
                                -> 불필요한 그룹 및 계정에 대해서는 권한을 제거
  3) SRM(Security Reference Monitor)
      - 인증된 사용자 -> SID 부여 -> 이를 기반으로 파일 및 디렉터리에 접근혀용여부를 결정, 감사메세지 생성

2. 윈도우 인증 과정
    1) 로컬인증
        (1) 로그인 Process 시작
        (2) Winlogon에서 인증정보를 LSA에 전달
        (3) LSA에서 NTLM과 SAM을 거쳐 접근토큰을 생성해 Winlogon으로 전달
        (4) Winlogon에서 로그인 Process가 완료되어 New Process의 시작
    2) 원격(도메인) 인증
        (1)~(2)까지 로컬과 동일
        (3) 도메인 인증용 인증정보일시 LSA에서 도메인 컨트롤러(DC)로 인증정보 전달
        (4) DC에서 커버로스와 액티브 디렉토리를 통해 접근토큰을 생성해 LSA로 전달
        (5) LSA에서 Winlogon으로 접근토큰을 전달
        (6) 로그인이 완료되어 New Process의 시작

3. 윈도우 보안 식별자(SID)  cf) 리눅스와 유닉스에서는 User ID와 Group ID에 해당
    1) 부여된 고유 식별번호
    2) 로그인시 접근 토큰이 생성
        * 접근토근 -> 로그인 사용자와 사용자가 속한 모든 그룹에 대한 SID정보가 담김
                  의 사본은 SID에 의해 시작된 모든 Process에 할당
    3) 사용자 식별자(ID) Number
        - 500 : 관리자 식별자
        - 501 : 게스트 식별자
        - 1000이상 : 일반 사용자 식별자
    4) 확인 방법
        (1) 실행
        (2) wmic(윈도우 관리명령 콘솔)
        (3) useraccount list brief 명령 실행

4. 윈도우 인증구조 
    1) Challenge&Response 구조
        - 높은 보안성을 위해 사용
        if) ID & Password 구조는 sniffing을 통한 정보유출의 우려가 있으며, 재전송공격에 취약함
    2) Challenge&Response 인증의 과정
                          사용자                                          윈도우
                            |----------------1. 인증 요청 -----------------> |
                            |                                                |    2. Challeng값 생성(일회성 임의의 값)
                            |<------------3. Challenge 값 전송 ------------- |
      4.response값 생성     |                                                |
  (challenge + 비밀번호)     |-------------5. Response 값 전송--------------> |  
                            |                                                |    6. Response 값 확인(서버에는 이미 사용자의 비밀번호가 있기에)
                            |<---------------6. 인증 성공---------------------|

5. 인증 암호 알고리즘
    1) LM 해시 : 윈도우 xp, 2000의 기본 알고리즘, 취약함-> 비스타 이루에 기본적 사용 불가
    2) NTLM 해시 : LM해시 + MD4 해시
    3) NTLMv2 해시 : 비스타 이후 기본 인증 Protocol, 기존과 전혀 다른 알고리즘을 이용한 해시값 생성
                   : 복잡도가 충분해 크래킹이 어려움
    * Lan manager(인증을 담당하는 서비스) 인증 수준 설정 => 안전한 인증을 위해 NTLMv2 사용권장

6. 패스워드 크래킹
    1) 사전 공격/ 사전 대입 공격(Dictionary Attack)
        - 자주 사용되는 언어, 생일, 숫자 등으로 미리 사전 파일 생성루 하나씩 대입해 Password와 일치 여부 확인
    2) 무차별 공격 / 무작위 대입 공격(Brute Force Attack)
        - 사전 대입 공격 실패후 진행
        - 문자열 범위를 정하고, 생성가능한 모든 Password를 생성 후 대입 -> 많은 시간과 cpu 소모가 발생
    3) 혼합공격(Hybrid Attack)
        - 사전 파일에 있는 문자열에 추가로 무작위 대입하여 공격
        - 즉, 사전공격 base에 무차별 공격을 첨가
    4) 레인보우 테이블을 이용한 공격
        - 레인보우 테이블 : 하나의 Password에 변이 함수를 적용 -> 해시를 고리처럼 연결 -> 일정 수의 패스워드롸 해시로 이루어진 체인을 무수히 많이 만들어 놓은 Table
        - 테이블 내의 해시값과 일치하는 것을 찾아내서 Password를 찾는 방법






